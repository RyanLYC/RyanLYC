### 项目管理迷失

#### 单体应用框架

优点

- 代码管理成本低
- 代码可见度搞
- 发布简短，链路轻便

缺点

- 代码量大后，调试、构建效率显著下降
- 无法跨项目使用

#### 多仓多模块管理 MultiRepo

优点

- 便于代码复用
- 模块独立开发调试，业务理解清晰高
- 人员安排分工明确
- 提高研发人员公共抽离思想
- 源代码房屋权限设置灵活

缺点

- 模块划分不容易把握
- 共同引用的版本问题，容易导致重复安装相同依赖得多个版本
- 构建配置不复用，不好管理
- 串行构建

#### 单仓库多模块管理 Monorepo

优点

- 所有源码都在一个仓库内，分支管理简单
- 公共依赖统一
- 统一的配置方案
- 并行构建
- 保留了 multirepo 得主要优势
- 阅读方便

缺点

- git 服务根据目录进行访问权限划分，仓库内代码开放给全部开放人员
- 代码规模太大得实惠，影响 git 操作体验。20 万行都还可以。

### yarn workspaces

使用 yarn 的时候几个要注意的点

- 配置 workspace 的方式是修改根目录中的 package.json:

```json
"private":true,
"workspaces":["packages/*"]
```

- 管理模块依赖可以使用 yarn workspace <module-name> add <module>;yarn 会自动管理的多个不同的包下面的不同的版本号的相同依赖名的依赖，
  如果与根目录中的依赖冲突，会默认的在该包下创建一个 node modules 的目录，并下载一份的依赖至该包中;
- 模块还未发布时，使用 yarn 来关联本地依赖，可能会下载到别人创建的同名包名;
- 包名使用 @空间名/包名 的结构，如 @ryan/pkg-name
- 在模块间使用依赖的时候，不要使用 fi1e:，而是可以使用<module>:'\*';

### pnpm workspaces 推荐使用这个
